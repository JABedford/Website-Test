# Cheap radio telemetry with Nexmo and Python

Summary: This article looks at how to set up a cheap radio telemetry
system using Arduino or Raspberry Pi with an SMS shield, Nexmo and a
little bit of Python on the back end.

I crawled further down the cable duct and got an attack of
claustrophobia. It was in the depths of a Norwegian winter and despite
the heat being generated by the TransOcean 8's vast diesel room I was
half frozen. I crawled a bit further, dragging the armoured cable
behind me. Only a few more metres to go and I'd drop, literally, into
the pit room where I'd already installed my junction box. TO8's pit
room was the biggest I'd seen, with twelve main pits. Most rigs I'd
been on only had three. TO8 was the mother of all wildcat rigs,
ploughing its trade in godforsaken stretches of the North Sea. Despite
the dark storm raging outside the TO8 was rock steady, a testament to
is immovable bulk, kept in position by state-of-the-art GPS and huge
computer-controlled thrusters. I lugged the cable a bit
further. Nearly there. I dropped down into the pit room, exhausted,
and pondered how much easier my life would be if I didn't have to lug
cables around. So far, I reckoned I'd wired up 50 sensors, and I was
probably half-done. The most dangerous to install had been the kelly
height sensor. I'd been winched up into the derrick by a roughneck
who'd just worked 12 hours straight. At one point I think he fell
asleep standing up, leaving me dangling in mid air. I quickly
tie-wrapped the kelly bottle onto the kelly block, a makeshift sensor
as simple as it was ingenious - a pressurized system of water and
air - you went up - more water pressure on a strain gauge, you went
down, less pressure. I shouted down to the roughneck and slowly
descended. We both shuffled off the drill deck, thinking of sleep.

The most claustrophic install had been the rotary table RPM
sensor. I'd had to squueze into a tiny crawl space under the rotary
table, the spinning clutch powered by a vast electric motor, that
turned the entire drill string, a couple of miles of the stuff,
probing down into the prehistoric rock formations.

I dropped down into an empty pit and grumbling to myself started
welding in a bracket for the mud level sensor, and wished the whole
mess of cables, the bane of my life, would just go away...

## So what is radio telemetry?

The above little vignette hints at a problem. When you have a biggish
data acquisition project you usually have to end up installing
literally miles of cable, which is a right Royal pain in the bum. A
better way is to use radio telemetry. In the age of the Internet of
Things this should be quite possible, and it is, within certain
limitations.

Radio telemetry is the ability to send data, especially data from
sensors and actuators, via radio waves rather than through electrical
cables.

Radio telemetry is especially useful in scenarios where the source at
edge-of-network is physically very remote, or possibly even
moving. Obviously when you try to run cables from the GPS sensor on a
train and wire it back to your logging unit you are in for some
trouble. Telemetry by radio waves is more or less essential in that
case. You could simply store the data locally for downloading later,
but this does not give you the real-time data you need in many
scenarios. OK by real-time here we are not talking high frequency
updates - we might only need to know the position of the train every
30 seconds or so.

## Example scenarios

So, just to recap, radio telemetry is very useful where the source of
the data is:

1. Remote
2. Moving

Some examples:

- Geolocation of vehicle
- Weight of load e.g. refuse collection lorry 
- Remote pumping station
- River level monitoring / flood warning
- Weather station
- Alarms of all kinds
- Periodic status updates

In this article I am specifically looking at sending small amounts of
low frequency telemetry data via SMS, using the Nexmo SMS API and a
little bit of Python.

## Overview

So what are we looking at specifically in this article?

With low cost boards available you have the potential for very cheap
sensor electronics. A Raspberry Pi or Arduino are suitable
for low cost multi-channel data acquisition from a variety of
sensors. They are also capable of carrying out various control tasks
such as temperature control and motor control.

Witn suppliers like [Ada Fruit](https://www.adafruit.com) supplying
cheap SMS modules for Pi and 'shields' for Arduino - the sky is quite
literally the limit. You could acquire data on multiple channels and
then send that information via SMS - it does not matter how remote the
sensor is (as long as there's mobile coverage), or whether it's
moving or not.

By way of example, messages might be sent as follows:

1. TANK1=25.1, TANK2=13.2, TANK3=43.9(ALARM), TANK4=9.7
2. (21.62514414481643, -2.3010920480245426)=23.7
3. DANGER: Warp drive is overheating. Please call +44-0123456789.

Note, you can identify the source of the data by the incoming message
phone number, so you don't need to include that in the message unless
more than one unit are sharing an "SMS hub". Actually in many
scenarios the idea of an SMS hub could be quite useful.


## Types of radio networks

G3, G4, SMS, packet radio etc.


## Limitations

When using SMS as a radio telemetry system, there are some limitations
to take into account:

1. The rate at which you can send SMS messages. (Nexmo throttles to around 30 API calls a second)
2. The message length of a single SMS. (Theoretically there is a standard but different carriers have different restrictions)

... discuss these limitations a bit more.


## Nexmo SMS limitations

https://help.nexmo.com/hc/en-us/articles/203993598-What-is-the-Throughput-Limit-for-Outbound-SMS-


## Legal

I'm not sure you could use your typical unlimited SMS plan in such a
scenario. You would have to contact your provider. If you are sending
a lot of SMS messages your provider might kick up about it. Still one
SMS an hour for 24 SMS per day is not going to be too problematic - my
daughter used to send several hundred SMS a day when she was about 15!
If in doubt check with your provider and possibly a lawyer!

## Hardware


## Data format

Including dealing with a data packet spread over multiple messages.

## Mobile networks primer



## Nexmo

## Costs

## Python backend

1. Receiving inbound SMS (data)
2. Sending outbound SMS (alarm)

## Ngrok

## Testing

## It could be a two-way thing

xxx modules can receive SMS for control purposes.

## References

- [Vast canal monitoring system in
  China](https://spectrum.ieee.org/tech-talk/telecom/internet/a-massive-iot-sensor-network-keeps-watch-over-a-1400kilometer-canal). This
  is a fascinating look at a big IoT project. A system similar to the
  one described in this article could be used to implement an alarm
  system. I think the idea of underwater robots is really cool too!
- [Ada Fruit](https://www.adafruit.com) - suppliers of all kinds of electronic goodies, including SMS/GPS modules/shields.
- Nice piece on [GPS Tracking](https://en.wikipedia.org/wiki/GPS_tracking_unit)

---

* Published: 2018-xx-xx 04:30:12 UTC
* Updated: 2018-xx-xx 04:30:12 UTC
* UUID: C7052670-A284-47DA-A80D-5D847A4B2C68
